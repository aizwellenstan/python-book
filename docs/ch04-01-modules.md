# モジュール

モジュールとは関数やクラスなどを別ファイルで再利用可能な状態で整理した Python のソースコードのことです。これまでのソースコードは実行することを念頭に実装しましたが、モジュールは別のファイルから取り込まれることを意識して実装を行います。

## モジュールの書き方

拡張子 `.py` を持った通常の Python ファイルとして作成すれば問題ありません。ただし `Hello, World!` プログラムで見たシバン

```python
#!/usr/bin/env python
```

はモジュールを実装するときには不要です。たとえ書いても悪さをすることはありませんが、実行するスクリプトとしては使用しないので書く意味はあまりありません。

フィボナッチ数列 `0, 1, 1, 2, 3, 5, 8, ...` を出力するような関数 `fib(n)` をモジュールとして書いてみましょう。

**fib.py**

```python
# -*- coding: utf-8 -*-


def fib(n):
    a, b = 0, 1

    while a < n:
        print(a, end=' ')
        a, b = b, a + b

    print()
```

`fib.py` を別のファイル `main.py` に取り込んでこの関数を実行するには次のように書きます。

**main.py**

```python
#!/usr/bin/env python
# -*- coding: utf-8 -*-


import fib          # fib.py を取り込む


def main():
    fib.fib(10)     # fib.py 内の fib() を呼び出す


if __name__ == '__main__':
    main()
```

## モジュール作成の注意点

Python のコードは必ずしも関数内に含める必要はなく、ファイル内に直接処理を書くこともできます。

**fib.py**

```python
# -*- coding: utf-8 -*-


a, b = 0, 1

while a < n:
    print(a, end=' ')
    a, b = b, a + b

print()
```

しかしこの状態で `main.py` から `import fib` をすると import した時点でフィボナッチ数列を出力する処理が突然実行されてしまいます。こういった問題が起こらないようにモジュールとして提供する機能は基本的に関数やクラスにまとめておく必要があります。
