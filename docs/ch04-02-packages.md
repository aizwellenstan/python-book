# パッケージ

モジュールを使うことで関数やクラスをまとめることができますが、1 つのモジュール内にたくさんの定義を含めてしまうとコードが長くなってしまい分かりづらくなってしまいます。そういうときはファイルを分割して複数のモジュールを作成し、それを 1 つのディレクトリに集約することで綺麗に整理することができます。このように複数のモジュールを集約したディレクトリのことをパッケージといいます。

モジュールとパッケージの関係はファイルシステムでいうところのファイルとディレクトリの関係に一致します。

| ファイルシステム | Python     |
|------------------|------------|
| ファイル         | モジュール |
| ディレクトリ     | パッケージ |

ファイル・ディレクトリのことを Python の世界ではモジュール・パッケージと呼んでいると理解して概ね問題ありません。

## パッケージの作り方

パッケージはディレクトリのことだと説明しましたが、単に Python のソースコードをディレクトリに集約しただけではパッケージにはなりません。ディレクトリをパッケージとして扱うためには `__init__.py` というファイルをディレクトリ内に用意しておく必要があります。

```
example
├── __init__.py     # これがないとパッケージとは呼べない
├── a.py
└── b.py
```

`__init__.py` は空ファイルとして作成してもらって問題ありません。Python のソースコードをディレクトリに集約するときは必ず `__init__.py` を作るようにしましょう。

## パッケージを使用する

パッケージもモジュールと同様、他のファイルに取り込まれることを想定した機能なので `import` 構文を使って取り込む
ことができます。いま、パッケージの構成が次のようになっていたとしましょう。

```
example
├── __init__.py
├── a.py
│  └── def fib(n)
└── b.py
```

このとき、関数 `fib(n)` を呼び出したいときには次のようにします。

```python
#!/usr/bin/env python
# -*- coding: utf-8 -*-


import example


def main():
    example.a.fib(10)


if __name__ == '__main__':
    main()
```

`パッケージ名.モジュール名.関数名` のように `.` で区切って関数にアクセスすることができます。ちなみにパッケージ内にパッケージが含まれていても問題ありません。

!!! warning "パッケージ名の命名規則"
    パッケージ名に `-` を使用するのは避けましょう。なぜなら `xxx-yyy` というパッケージを作ったとき

    ```python
    import xxx-yyy
    ```

    のように import することになりますが `-` が引き算だと解釈されてしまいます。一般的にパッケージ名は次のルールを守るべきとされています。

    - 区切り文字は禁止（`-` 以外も）
    - 全て小文字
